#!/bin/bash

set_term_bgcolor(){
  local R=$1
  local G=$2
  local B=$3
  /usr/bin/osascript <<EOF
tell application "iTerm"
  tell the current window
    tell the current session
      get background color
      set background color to {$(($R*65535/255)), $(($G*65535/255)), $(($B*65535/255))}
    end tell
  end tell
end tell
EOF
}

case $@ in
    "prod" ) set_term_bgcolor 40 0 0;;
    "db" ) set_term_bgcolor 40 0 0;;
    "cdn" ) set_term_bgcolor 40 0 0;;
    "gitlab" ) set_term_bgcolor 40 0 0;;
    "macmini" ) set_term_bgcolor 0 30 0;;
esac

sshrc $@

set_term_bgcolor 28 28 28
