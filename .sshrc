# vim: filetype=sh :

#export VIMINIT="let \$MYVIMRC='$SSHHOME/.sshrc.d/.vimrc' | source \$MYVIMRC"
# do not use it! or you will setup all of vim plugins with dein.vim when type vim

shopt -s expand_aliases

export XDG_CONFIG_HOME="$SSHHOME/.sshrc.d/.config"
export TMUX_CONF="$SSHHOME/.sshrc.d/.tmux.conf"

. "$SSHHOME/.sshrc.d/.bashrc"
. "$SSHHOME/.sshrc.d/.aliases"

tmuxrc() {
    local TMUXDIR=/tmp/.ikuwow-tmux-server
    if ! [ -d $TMUXDIR ]; then
        rm -rf $TMUXDIR
        mkdir -p $TMUXDIR
    fi
    rm -rf $TMUXDIR/.sshrc.d
    cp -r "$SSHHOME/.sshrc" "$SSHHOME/bashsshrc" "$SSHHOME/sshrc" "$SSHHOME/.sshrc.d" "$TMUXDIR"
    SSHHOME="$TMUXDIR" SHELL="$TMUXDIR/bashsshrc" /usr/bin/tmux -S "$TMUXDIR/tmuxserver" "$@"
}
export SHELL=$(which bash)
alias tmux=tmuxrc
